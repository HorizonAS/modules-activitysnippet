this.ActivitySnippet=this.ActivitySnippet||{},this.ActivitySnippet.ActivitySnippetTemplates=this.ActivitySnippet.ActivitySnippetTemplates||{},this.ActivitySnippet.ActivitySnippetTemplates["app/scripts/templates/FAVORITED.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(){return" fa-heart "}function g(){return" fa-heart-o "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j=this,k="function",l=this.escapeExpression;return i+='<span class="activitysocial-item">\n    <a><i class="activitysocial-icon fa ',h=c["if"].call(b,b&&b.activityState,{hash:{},inverse:j.program(3,g,e),fn:j.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='"></i></a><span>'+l((h=b&&b.activity,h=null==h||h===!1?h:h.object,h=null==h||h===!1?h:h.counts,typeof h===k?h.apply(b):h))+" HEART\n</span>\n"}),this.ActivitySnippet.ActivitySnippetTemplates["app/scripts/templates/WATCHED.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(){return" fa-eye "}function g(){return" fa-eye-slash "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j=this,k="function",l=this.escapeExpression;return i+='<span class="activitysocial-item">\n    <a href="#"><i class="activitysocial-icon  fa ',h=c["if"].call(b,b&&b.activityState,{hash:{},inverse:j.program(3,g,e),fn:j.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='"></i></a><span>'+l((h=b&&b.activity,h=null==h||h===!1?h:h.object,h=null==h||h===!1?h:h.counts,typeof h===k?h.apply(b):h))+" EYE\n</span>\n"}),function(){"use strict";var a,b,c=[].slice,d={}.hasOwnProperty;b="undefined"!=typeof exports&&null!==exports?exports:this,b.ActivitySnippet="undefined"!=typeof ActivitySnippet&&null!==ActivitySnippet?ActivitySnippet:{},a=function(){function a(){}var b;return a.prototype.ready=function(a,b){var c,d;return d=function(){return ActivitySnippet.utils.ready.fired||(ActivitySnippet.utils.ready.fired=!0),a.apply(b)},"complete"===document.readyState?d():document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(c=function(){var a;try{document.documentElement.doScroll("left")}catch(b){return a=b,void setTimeout(c,1)}return d()},document.attachEvent("onreadystatechange",d),window.attachEvent("onload",d),document.documentElement&&document.documentElement.doScroll&&!window.frameElement)?c():void 0},b=function(a,b){var c,d;4===this.readyState&&(this.status>=200&&this.status<400?(c=JSON.parse(this.responseText),a(c)):(d=this.status+" "+this.statusText,b(d)))},a.prototype.getJSON=function(a,c,d){var e;return e=new XMLHttpRequest,e.open("GET",a,!0),e.onreadystatechange=function(){return b.call(this,c,d)},e.send(),e=null},a.prototype.postJSON=function(a,c,d,e){var f;return c=JSON.stringify(c),f=new XMLHttpRequest,f.open("POST",a,!0),f.onreadystatechange=function(){return b.call(this,d,e)},f.send(c),f=null},a.prototype.extend=function(){var a,b,e,f,g;if(a=1<=arguments.length?c.call(arguments,0):[],!a[0])return{};for(b in a){g=a[b];for(e in g)if(d.call(g,e))if(f=g[e],null==a[0][e]&&"object"!=typeof f)a[0][e]=f;else{if(null!=a[0][e]&&"object"!=typeof f)continue;null==a[0][e]&&(a[0][e]={}),a[0][e]=this.extend(a[0][e],f)}}return a[0]},a.prototype.del=function(a,c,d){var e;return e=new XMLHttpRequest,e.open("DELETE",a,!0),e.onreadystatechange=function(){return b.call(this,c,d)},e.send(),e=null},a.prototype.logger=function(a){return console.log("------------"),console.log(JSON.stringify(a)),console.log("------------")},a.prototype.unpack=function(){var a,b,d,e,f;if(b=arguments[0],a=2<=arguments.length?c.call(arguments,1):[])for(e=0,f=a.length;f>e;e++)d=a[e],"undefined"!=typeof d&&(d.length>0?[].push.apply(b,d.splice(0,d.length)):[].push.apply(b,a.slice(d)));return b},a}(),ActivitySnippet.utils=new a}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a="undefined"!=typeof exports&&null!==exports?exports:this,a.ActivitySnippet="undefined"!=typeof ActivitySnippet&&null!==ActivitySnippet?ActivitySnippet:{},ActivitySnippet.ActivityStreamSnippet=function(){function a(a,c,d,e,f){this.save=b(this.save,this),this.bindClick=b(this.bindClick,this),this.fireCallbacks=b(this.fireCallbacks,this);var g,h;if(null==a)throw new Error("Need Html Element");if(null==d)throw new Error("Need Templates Object");if(null==c.ActivityStreamAPI)throw new Error("Need ActivityStreamAPI endpoint");this.service=c.ActivityStreamAPI,this.active=null!=(g=c.active)?g:!0,this.state=!1,this.el=a,this.id=a.getAttribute("data-id"),this.activeCallbacks=e,this.inactiveCallbacks=f,this.actor=null!=(h=c.actor)?h:null,this.verb=a.getAttribute("data-verb").toUpperCase(),this.object=this.constructObject(a),this.count=0,this.urls=this.createUrls(),this.view=d["app/scripts/templates/"+this.verb+".handlebars"],this.render(),this.bindClick()}return a.prototype.createUrls=function(){var a;return a={},a.get=""+this.service+"/object/"+this.object.type+"/"+this.object.id+"/"+this.verb,null!=this.actor&&(a.get=""+this.service+"/activity/"+this.actor.type+"/"+this.actor.id+"/"+this.verb+"/"+this.object.type+"/"+this.object.id,a.post=""+this.service+"/activity",a.del=""+this.service+"/activity/"+this.actor.type+"/"+this.actor.id+"/"+this.verb+"/"+this.object.type+"/"+this.object.id),a},a.prototype.constructObject=function(a){var b;return b={id:a.getAttribute("data-object-id"),type:a.getAttribute("data-object-type"),api:a.getAttribute("data-object-api")}},a.prototype.convertIdToTypeId=function(a){var b;return b=ActivitySnippet.utils.extend({},a),b[b.type+"_id"]=b.id,delete b.id,b},a.prototype.constructActivityObject=function(a){var b,c;return b=this.convertIdToTypeId(this.actor),c=this.convertIdToTypeId(this.object),null!=a&&console.log("data",a),this.activity={actor:b,verb:this.verb,object:c}},a.prototype.fireCallbacks=function(a){var b,c;c=[];for(b in a)c.push(a[b].call(this));return c},a.prototype.toggleActive=function(){return this.active=!this.active,this.render()},a.prototype.toggleState=function(){return this.state=!this.state,this.render()},a.prototype.setActor=function(a){return this.actor!==a?(this.actor=null!=a?a:this.actor,this.urls=this.createUrls(),this.activity=this.constructActivityObject(this.actor,this.verb,this.object)):void 0},a.prototype.render=function(){var a;return a={activity:this.activity,active:this.active,state:this.state},this.el.innerHTML=this.view(a)},a.prototype.bindClick=function(){var a=this;return this.el.onclick=function(){return a.active===!0?(a.fireCallbacks(a.activeCallbacks),a.save(a.activity),a.toggleState()):a.fireCallbacks(a.inactiveCallbacks)}},a.prototype.fetch=function(){var a=this;return ActivitySnippet.utils.getJSON(this.urls.get,function(b){return a.constructActivityObject(b),a.render},function(a){return console.error(a)})},a.prototype.save=function(){return this.state?ActivitySnippet.utils.del(this.urls.del,function(a){return console.log(a)},function(a){return console.error(a)}):(console.log(this.activity,this.urls.post),ActivitySnippet.utils.postJSON(this.urls.post,this.activity,function(a){return console.log(a)},function(a){return console.error(a)}))},a}()}.call(this),function(){"use strict";var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a="undefined"!=typeof exports&&null!==exports?exports:this,a.ActivitySnippet="undefined"!=typeof ActivitySnippet&&null!==ActivitySnippet?ActivitySnippet:{},ActivitySnippet.ActivityStreamSnippetFactory=function(){function a(a){this.fetch=b(this.fetch,this);var d,e;if(this.settings=ActivitySnippet.utils.extend({},a,c),!this.settings.ActivityStreamAPI)throw new Error("SnippetFactory:: Must pass in ActivityStreamAPI");this.count=0,this.actor=null!=(d=this.settings.actor)?d:null,this.templates=ActivitySnippet.ActivitySnippetTemplates,this.active=null!=(e=this.settings.active)?e:!0,this.activeCallbacks=[],this.inactiveCallbacks=[],ActivitySnippet.utils.unpack(this.activeCallbacks,a.activeCallbacks),ActivitySnippet.utils.unpack(this.inactiveCallbacks,a.inactiveCallbacks),this.snippets=this.initActivityStreamSnippets(this.settings,this.templates,this.activeCallbacks,this.inactiveCallbacks)}var c;return c={debug:!1,snippetClass:".activitysnippet"},a.prototype.initActivityStreamSnippets=function(a,b,c,d){var e,f,g,h;g=document.querySelectorAll(a.snippetClass),h=[];for(f in g)if(g.hasOwnProperty(f)&&"length"!==f&&null==g[f].getAttribute("data-id")){g[f].setAttribute("data-id","as"+this.count);try{h.push(new ActivitySnippet.ActivityStreamSnippet(g[f],a,b,c,d))}catch(i){e=i,console.error(e.stack)}this.count++}return h},a.prototype.fetch=function(){var a,b,c,d,e;for(d=this.snippets,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.fetch());return e},a.prototype.refresh=function(){var a,b;return a=this.count,this.snippets.push.apply(this.snippets,this.initActivityStreamSnippets(this.settings,this.templates)),this.count!==a&&0!==this.count?b=this.fetch():void 0},a.prototype.toggleState=function(){var a,b;this.active=!this.active,b=[];for(a in this.snippets)b.push(this.snippets[a].toggleActive());return b},a.prototype.setActor=function(a){var b;if(this.actor!==a){this.actor=a;for(b in this.snippets)this.snippets[b].setActor(this.actor);return this.fetch()}},a}()}.call(this);